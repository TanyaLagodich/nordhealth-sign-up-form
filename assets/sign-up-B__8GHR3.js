import{d as b,m as x,u as U,r as p,c as w,w as y,v as V,a as v,b as o,e as k,o as f,f as S,g as c,h as E,i as $,j as a,t as M,k as g,l as P,n as T}from"./main-CfXJD9YG.js";const q=["label","type","error"],C=["name"],I=b({__name:"input-password",props:x({label:{},error:{}},{password:{},passwordModifiers:{}}),emits:["update:password"],setup(m){const s=U(m,"password"),r=p(!1),d=w(()=>r.value?"interface-edit-off":"interface-edit-on"),i=w(()=>r.value?"text":"password");return(u,n)=>y((f(),v("provet-input",{"onUpdate:modelValue":n[1]||(n[1]=e=>s.value=e),label:u.label,type:i.value,required:!0,error:u.error,style:{"--n-input-inline-size":"100%"}},[n[2]||(n[2]=o("provet-icon",{slot:"start",name:"interface-password"},null,-1)),o("provet-button",{slot:"end",square:"",onClick:n[0]||(n[0]=k(e=>r.value=!r.value,["prevent"]))},[o("provet-icon",{name:d.value},null,8,C)])],8,q)),[[V,s.value]])}}),N=()=>{const m=S(),s=p({email:"",password:"",receiveUpdates:!1}),r=p({email:void 0,password:void 0}),d=p(null),i=p(!1),u=()=>{r.value={email:void 0,password:void 0},d.value=null},n=async l=>{if(await new Promise(t=>setTimeout(t,2e3)),l.email==="test@example.com")throw new Error("This email is already registered");return{success:!0,message:"User registered successfully"}};return{data:s,errors:r,isLoading:i,formError:d,handleSubmit:async()=>{u();let l=!0;if(s.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value.email)||(r.value.email="Please enter a valid email address",l=!1):(r.value.email="Email is required",l=!1),s.value.password||(r.value.password="Password is required",l=!1),!l)return!1;i.value=!0;try{return await n({email:s.value.email,password:s.value.password,receiveUpdates:s.value.receiveUpdates}),await m.push("/home"),!0}catch(t){return d.value=t.message||"Registration failed. Please try again.",!1}finally{i.value=!1}}}},_={padding:"l",style:{"max-width":"400px",margin:"var(--n-space-xl) auto"}},z=["error"],B=["checked"],D={key:0,shadow:"",variant:"danger"},L=["loading"],A=b({__name:"sign-up",setup(m){const{data:s,errors:r,isLoading:d,formError:i,handleSubmit:u}=N();return(n,e)=>{const l=T("router-link");return f(),v("provet-card",_,[e[9]||(e[9]=o("h1",{class:"n-margin-be-m"},"Sign up",-1)),o("form",{class:"n-margin-be-m",onSubmit:e[5]||(e[5]=k((...t)=>a(u)&&a(u)(...t),["prevent"]))},[o("provet-stack",null,[y(o("provet-input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a(s).email=t),label:"Email",type:"email",required:"",error:a(r).email,style:{"--n-input-inline-size":"100%"},onInput:e[1]||(e[1]=t=>a(r).email=void 0)},e[6]||(e[6]=[o("provet-icon",{slot:"start",name:"interface-email"},null,-1)]),40,z),[[$,a(s).email]]),c(a(I),{modelValue:a(s).password,"onUpdate:modelValue":e[2]||(e[2]=t=>a(s).password=t),label:"Password",error:a(r).password,onInput:e[3]||(e[3]=t=>a(r).password=void 0)},null,8,["modelValue","error"]),o("provet-checkbox",{label:"Iâ€™d like to receive occasional product updates and announcements.",size:"s",checked:a(s).receiveUpdates,onInput:e[4]||(e[4]=()=>a(s).receiveUpdates=!a(s).receiveUpdates)},null,40,B),a(i)?(f(),v("provet-banner",D,M(a(i)),1)):E("",!0),o("provet-button",{type:"submit",expand:"",variant:"primary",loading:a(d)}," Sign up ",8,L)])],32),o("p",null,[e[8]||(e[8]=g(" Already have an account? ")),c(l,{to:{name:"sign-in"}},{default:P(()=>e[7]||(e[7]=[g("Login in")])),_:1})])])}}});export{A as default};
